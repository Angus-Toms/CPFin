#include "example.hpp"

int main() {
	std::vector<double> arma_data = {
		0.7487170739654638, 0.22130596196148755, -2.5027475079749455, 1.1646017333547598, 1.4981719289582416, 2.6597833264925814, -2.75963830269577, 1.947336764134092, -1.06734111046012, -0.7742944270012566, 0.20046528098982247, -1.0869067283792015, 2.167520495430838, 2.409475295168904, -3.5174014658739865, 1.3056290957085976, -0.3845351604018754, -1.809442866431018, 1.928042938013902, -1.961062131112111, 1.8403220184626683, 0.6902716006045795, 3.9935405985687304, -5.024862515733249, 4.5400669963740645, -2.6527845743944747, 0.6946223749847301, 1.512927415789293, -0.6576245074003628, 0.7736005057535013, 0.8800443372555499, 0.3965881219393329, 1.1129767016584535, -2.106956260021386, 2.3421152514423844, -2.6203258786760495, 2.436710096709979, -0.6072466578087707, -1.4801253303655717, 4.784327314174481, -2.2109107240512564, 1.2550333981369364, -0.11037208783232236, 1.5423721294323953, -0.28201168211454, 2.135452072681572, -1.8360811139716862, 1.7775932446419536, -2.1060686294936395, 0.9497268900839235, 1.30542841109993, -3.7799909977154598, 1.6564275686097523, -3.047053350627945, 1.3505995336172911, -2.5126303453583803, 0.728162748591065, 3.181605627132325, -5.077998612825111, 6.820875076722554, -6.46090187499859, 4.287176605163285, -2.412526567522827, 0.6254471204715041, 0.4368628671317971, 0.3539467739969209, -0.5659412205428201, 2.186846623248317, -2.758815242678981, 3.2650217793769096, -6.6010810673933635, 6.59671475963302, -9.02234854969268, 6.92635773536579, -8.742820370485322, 4.864552701164813, -5.9764602225608305, 4.684721959978651, -6.199582652021324, 2.2427711487921256, -5.136689533019346, 7.575371114872361, -7.730079444462117, 7.1064662195701285, -5.811667114941723, 8.478527300946427, -11.360660024293278, 12.59066312470315, -8.784748785992896, 13.342002403352476, -10.085897291137012, 9.889330745640416, -9.713057307524666, 10.486409969975494, -9.22534590749393, 7.554941613283786, -7.690558973378, 6.458458379399969, -11.529179321259615, 11.8753846187783
	};

	std::vector<std::time_t> dates;
	for (int i = 0; i < arma_data.size(); ++i) {
		dates.push_back(dateStringToEpoch("2022-01-01") + (intervalToSeconds("1d") * i));
	}

	auto ps = PriceSeries();
	ps.setCloses(arma_data);
	ps.setDates(dates);

	auto arma = ps.getARMA(2, 2);
	std::cout << arma->toString();
	arma->forecast(10);
	arma->plot();

	return 0;

	// AR params: [-0.30012365  0.60832106]
	// MA params: [-2.07452793  0.28801768]

}